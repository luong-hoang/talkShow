{% extends "talkShow/base.html" %}

{% block title %}Subjects this week{% endblock %}

{% block content %}
<div id="overview" class="container">
    <h1>Subjects for this week</h1>

    <ul>
    {% for user in users %}
        <li>
            {{ user.display_name }}
            {% if user.current_subject %}
                <span>{{ user.current_subject.subject }}</span>
            {% endif %}
        </li>
    {% endfor %}
    </ul>

    {{error}}

    {% if can_match %}
        <form method="post">
            {% csrf_token %}
            <div class="row form-group col-6">
                <label for="date">Talk show date</label>
                <input type="text" name="date" id="date" class="form-control">
            </div>

            <div class="row">
                <div class="col-4">
                    <div class="form-group">
                        <select id="user_x2" name="user[]" class="form-control">
                            <option value="0">--Presenter--</option>
                            {% for user in users %}
                            <option value="{{user.id}}">{{user.display_name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <select id="subject_x2" name="subject[]" class="form-control">
                            <option value="0">--Subject--</option>
                            {% for user in users %}
                            <option value="{{user.current_subject.id}}">{{user.current_subject.subject}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="col-4">
                    <div class="form-group">
                        <select id="user_x3" name="user[]" class="form-control">
                            <option value="0">--Presenter--</option>
                            {% for user in users %}
                            <option value="{{user.id}}">{{user.display_name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <select id="subject_x3" name="subject[]" class="form-control">
                            <option value="0">--Subject--</option>
                            {% for user in users %}
                            <option value="{{user.current_subject.id}}">{{user.current_subject.subject}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="col-4">
                    <div class="form-group">
                        <select id="user_x4" name="user[]" class="form-control">
                            <option value="0">--Presenter--</option>
                            {% for user in users %}
                            <option value="{{user.id}}">{{user.display_name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
                        <select id="subject_x4" name="subject[]" class="form-control">
                            <option value="0">--Subject--</option>
                            {% for user in users %}
                            <option value="{{user.current_subject.id}}">{{user.current_subject.subject}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-default">Match</button>
        </form>
    {% else %}
        All users must have their own subjects before make a match.
    {% endif %}
</div>
{% endblock content %}